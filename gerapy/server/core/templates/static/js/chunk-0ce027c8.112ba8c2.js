(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0ce027c8"],{"0171":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"panel"},[a("panel-title",{attrs:{title:t.$lang.titles.createTask}}),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loadData,expression:"loadData"}],staticClass:"panel-body",attrs:{"element-loading-text":t.$lang.messages.loading}},[a("el-row",[a("el-col",{attrs:{span:10}},[a("substance",{ref:"substance"},[a("template",{slot:"submit"},[a("el-button",{attrs:{type:"primary",size:"small",loading:t.onSubmitLoading},on:{click:t.onSubmitForm}},[a("i",{staticClass:"fa fa-check"}),t._v("\n\t\t\t\t\t\t\t"+t._s(t.$lang.buttons.create)+"\n\t\t\t\t\t\t")])],1)],2)],1)],1)],1)],1)},l=[],o=a("eee4"),s=a("80bd"),i={data:function(){return{onSubmitLoading:!1,loadData:!1,routeId:this.$route.params.id}},methods:{onSubmitForm:function(){var t=this;this.$refs.substance.$refs.form.validate(function(e){if(!e)return!1;var a=t.$refs.substance.formData;console.log(a),t.onSubmitLoading=!0,t.$http.post(t.$store.state.url.task.create,a).then(function(){t.$message.success(t.$store.getters.$lang.messages.successSave),t.onSubmitLoading=!1}).catch(function(){t.onSubmitLoading=!1})})}},components:{PanelTitle:o["a"],Substance:s["a"]}},r=i,c=(a("6a65"),a("2877")),u=Object(c["a"])(r,n,l,!1,null,null,null);e["default"]=u.exports},"66f0":function(t,e,a){},"6a65":function(t,e,a){"use strict";var n=a("ce2e"),l=a.n(n);l.a},"80bd":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-form",{ref:"form",attrs:{model:t.formData,rules:t.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:t.$lang.columns.name,prop:"name"}},[a("el-input",{attrs:{placeholder:t.$lang.messages.enter+" "+t.$lang.columns.name,size:"small"},model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}})],1),a("el-form-item",{attrs:{label:t.$lang.columns.clients,prop:"clients"}},[a("el-select",{attrs:{multiple:"",placeholder:t.$lang.messages.select,size:"small"},model:{value:t.formData.clients,callback:function(e){t.$set(t.formData,"clients",e)},expression:"formData.clients"}},t._l(t.clientOptions,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),a("el-form-item",{attrs:{label:t.$lang.columns.project,prop:"project"}},[a("el-input",{attrs:{placeholder:t.$lang.messages.enter+" "+t.$lang.columns.project,size:"small"},model:{value:t.formData.project,callback:function(e){t.$set(t.formData,"project",e)},expression:"formData.project"}})],1),a("el-form-item",{attrs:{label:t.$lang.columns.spider,prop:"spider"}},[a("el-input",{attrs:{placeholder:t.$lang.messages.enter+" "+t.$lang.columns.spider,size:"small"},model:{value:t.formData.spider,callback:function(e){t.$set(t.formData,"spider",e)},expression:"formData.spider"}})],1),a("el-form-item",{attrs:{label:t.$lang.columns.trigger,prop:"trigger"}},[a("el-select",{attrs:{placeholder:t.$lang.messages.select,size:"small"},model:{value:t.formData.trigger,callback:function(e){t.$set(t.formData,"trigger",e)},expression:"formData.trigger"}},t._l(t.triggerOptions,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),"date"===t.formData.trigger?a("div",[a("el-form-item",{attrs:{label:t.$lang.columns.runDate}},[a("el-date-picker",{attrs:{type:"datetime",size:"small","picker-options":t.dateOptions,placeholder:t.$lang.descriptions.chooseDateTime},model:{value:t.formData.configuration.run_date,callback:function(e){t.$set(t.formData.configuration,"run_date",e)},expression:"formData.configuration.run_date"}}),a("el-input",{staticClass:"inline width-100",attrs:{placeholder:t.$lang.columns.timezone,size:"small"},model:{value:t.formData.configuration.timezone,callback:function(e){t.$set(t.formData.configuration,"timezone",e)},expression:"formData.configuration.timezone"}})],1)],1):t._e(),"interval"===t.formData.trigger?a("div",[a("el-form-item",{attrs:{label:t.$lang.columns.runDate}},[a("el-input",{staticClass:"inline width-100",attrs:{placeholder:t.$lang.columns.weeks,type:"number",size:"small"},model:{value:t.formData.configuration.weeks,callback:function(e){t.$set(t.formData.configuration,"weeks",t._n(e))},expression:"formData.configuration.weeks"}}),a("el-input",{staticClass:"inline width-100",attrs:{type:"number",placeholder:t.$lang.columns.days,size:"small"},model:{value:t.formData.configuration.days,callback:function(e){t.$set(t.formData.configuration,"days",t._n(e))},expression:"formData.configuration.days"}}),a("el-input",{staticClass:"inline width-100",attrs:{type:"number",placeholder:t.$lang.columns.hours,size:"small"},model:{value:t.formData.configuration.hours,callback:function(e){t.$set(t.formData.configuration,"hours",t._n(e))},expression:"formData.configuration.hours"}}),a("el-input",{staticClass:"inline width-100",attrs:{type:"number",placeholder:t.$lang.columns.minutes,size:"small"},model:{value:t.formData.configuration.minutes,callback:function(e){t.$set(t.formData.configuration,"minutes",t._n(e))},expression:"formData.configuration.minutes"}}),a("el-input",{staticClass:"inline width-100",attrs:{type:"number",placeholder:t.$lang.columns.seconds,size:"small"},model:{value:t.formData.configuration.seconds,callback:function(e){t.$set(t.formData.configuration,"seconds",t._n(e))},expression:"formData.configuration.seconds"}}),a("el-input",{staticClass:"inline width-100",attrs:{placeholder:t.$lang.columns.timezone,size:"small"},model:{value:t.formData.configuration.timezone,callback:function(e){t.$set(t.formData.configuration,"timezone",e)},expression:"formData.configuration.timezone"}}),a("el-date-picker",{attrs:{type:"datetime",size:"small","picker-options":t.dateOptions,placeholder:t.$lang.columns.startDate},model:{value:t.formData.configuration.start_date,callback:function(e){t.$set(t.formData.configuration,"start_date",e)},expression:"formData.configuration.start_date"}}),a("el-date-picker",{attrs:{"picker-options":t.dateOptions,type:"datetime",size:"small",placeholder:t.$lang.columns.endDate},model:{value:t.formData.configuration.end_date,callback:function(e){t.$set(t.formData.configuration,"end_date",e)},expression:"formData.configuration.end_date"}})],1)],1):t._e(),"cron"===t.formData.trigger?a("div",[a("el-form-item",{attrs:{label:t.$lang.columns.runDate}},[a("el-input",{staticClass:"inline width-100",attrs:{placeholder:t.$lang.columns.year,size:"small"},model:{value:t.formData.configuration.year,callback:function(e){t.$set(t.formData.configuration,"year",e)},expression:"formData.configuration.year"}}),a("el-input",{staticClass:"inline width-100",attrs:{placeholder:t.$lang.columns.month,size:"small"},model:{value:t.formData.configuration.month,callback:function(e){t.$set(t.formData.configuration,"month",e)},expression:"formData.configuration.month"}}),a("el-input",{staticClass:"inline width-100",attrs:{placeholder:t.$lang.columns.day,size:"small"},model:{value:t.formData.configuration.day,callback:function(e){t.$set(t.formData.configuration,"day",e)},expression:"formData.configuration.day"}}),a("el-input",{staticClass:"inline width-100",attrs:{placeholder:t.$lang.columns.week,size:"small"},model:{value:t.formData.configuration.week,callback:function(e){t.$set(t.formData.configuration,"week",e)},expression:"formData.configuration.week"}}),a("el-input",{staticClass:"inline width-100",attrs:{placeholder:t.$lang.columns.dayOfWeek,size:"small"},model:{value:t.formData.configuration.day_of_week,callback:function(e){t.$set(t.formData.configuration,"day_of_week",e)},expression:"formData.configuration.day_of_week"}}),a("el-input",{staticClass:"inline width-100",attrs:{placeholder:t.$lang.columns.hour,size:"small"},model:{value:t.formData.configuration.hour,callback:function(e){t.$set(t.formData.configuration,"hour",e)},expression:"formData.configuration.hour"}}),a("el-input",{staticClass:"inline width-100",attrs:{placeholder:t.$lang.columns.minute,size:"small"},model:{value:t.formData.configuration.minute,callback:function(e){t.$set(t.formData.configuration,"minute",e)},expression:"formData.configuration.minute"}}),a("el-input",{staticClass:"inline width-100",attrs:{placeholder:t.$lang.columns.second,size:"small"},model:{value:t.formData.configuration.second,callback:function(e){t.$set(t.formData.configuration,"second",e)},expression:"formData.configuration.second"}}),a("el-input",{staticClass:"inline width-100",attrs:{placeholder:t.$lang.columns.timezone,size:"small"},model:{value:t.formData.configuration.timezone,callback:function(e){t.$set(t.formData.configuration,"timezone",e)},expression:"formData.configuration.timezone"}}),a("el-date-picker",{attrs:{type:"datetime",size:"small","picker-options":t.dateOptions,placeholder:t.$lang.columns.startDate},model:{value:t.formData.configuration.start_date,callback:function(e){t.$set(t.formData.configuration,"start_date",e)},expression:"formData.configuration.start_date"}}),a("el-date-picker",{attrs:{"picker-options":t.dateOptions,type:"datetime",size:"small",placeholder:t.$lang.columns.endDate},model:{value:t.formData.configuration.end_date,callback:function(e){t.$set(t.formData.configuration,"end_date",e)},expression:"formData.configuration.end_date"}})],1)],1):t._e(),a("div",[a("el-form-item",[t._t("submit"),a("el-button",{attrs:{size:"small"},on:{click:function(e){return t.$router.back()}}},[a("i",{staticClass:"fa fa-reply"}),t._v("\n\t\t\t\t"+t._s(t.$lang.buttons.return)+"\n\t\t\t")])],2)],1)],1)},l=[],o=(a("ac6a"),a("7f7f"),{name:"Substance",props:{id:{type:String,default:null}},data:function(){return{formData:{name:null,clients:[],trigger:null,project:null,spider:null,configuration:{run_date:null,weeks:null,days:null,hours:null,minutes:null,seconds:null,month:null,week:null,day:null,hour:null,minute:null,second:null,year:null,day_of_week:null,timezone:null,start_date:null,end_date:null}},clientOptions:[],dateOptions:{disabledDate:function(t){return t.getTime()<Date.now()-864e5}},rules:{name:[{required:!0,message:this.$store.getters.$lang.columns.name+" "+this.$store.getters.$lang.messages.isNull,trigger:"blur"}],project:[{required:!0,message:this.$store.getters.$lang.columns.project+" "+this.$store.getters.$lang.messages.isNull,trigger:"blur"}],spider:[{required:!0,message:this.$store.getters.$lang.columns.spider+" "+this.$store.getters.$lang.messages.isNull,trigger:"blur"}]},triggerOptions:[{value:"date",label:"Date"},{value:"interval",label:"Interval"},{value:"cron",label:"Crontab"}]}},mounted:function(){this.getClientData(),this.getTaskData()},methods:{getClientData:function(){var t=this;this.$http.get(this.$store.state.url.client.index).then(function(e){var a=e.data;a.forEach(function(e){t.clientOptions.push({value:e.pk,label:e.fields.name})})}).catch(function(){t.clients=[],t.$message.error(t.$store.getters.$lang.messages.loadError)})},getTaskData:function(){var t=this;this.id&&this.$http.get(this.format(this.$store.state.url.task.info,{id:this.id})).then(function(e){var a=e.data.data;t.formData=a}).catch(function(){t.$message.error(t.$store.getters.$lang.messages.loadError)})}}}),s=o,i=(a("d430"),a("2877")),r=Object(i["a"])(s,n,l,!1,null,"67cc2978",null);e["a"]=r.exports},ce2e:function(t,e,a){},d430:function(t,e,a){"use strict";var n=a("66f0"),l=a.n(n);l.a},eee4:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"panel-title"},[t.title?a("span",{domProps:{textContent:t._s(t.title)}}):t._e(),a("div",{staticClass:"fr"},[t._t("default")],2)])},l=[],o={name:"PanelTitle",props:{title:{type:String}}},s=o,i=a("2877"),r=Object(i["a"])(s,n,l,!1,null,null,null);e["a"]=r.exports}}]);
//# sourceMappingURL=chunk-0ce027c8.112ba8c2.js.map